# v1.9.1 更新日志

发布日期：2025-12-01

## 🎉 新功能

### 仅修复模式
- 新增"仅修复"翻译模式，跳过OCR和翻译步骤，只进行文字检测和图像修复
- 使用完整的mask refinement流程，确保修复质量
- 适用于只需要去除文字的场景，速度更快

## 🐛 Bug修复

### 编辑器文件管理
- 修复主页添加单个文件后，编辑器显示整个文件夹的问题
- 修复卸载文件夹后，编辑器画布不清空的问题
- 修复编辑器删除文件时列表重建导致文件夹折叠的问题
- 统一主页和编辑器的文件删除逻辑，确保数据同步

### Inpainting修复
- 修复inpainting时mask尺寸不匹配导致的错误
- 改进mask_original的resize逻辑，确保维度匹配

## ⚡ 优化

### 文件列表管理
- 改进编辑器文件列表管理，使用app_logic的文件列表，避免重复展开
- 优化文件删除流程，删除单个文件不重建列表，保持文件夹展开状态
- 改进文件夹路径转换逻辑，正确处理翻译后的文件夹

### 文件夹递归查找
- 添加文件夹时默认递归查找所有子文件夹中的图片文件
- 按子文件夹顺序排序，确保翻译顺序符合预期（第1话 → 第2话 → 第3话...）
- 文件列表显示顺序与实际翻译顺序保持一致
- 自动忽略 `manga_translator_work` 工作目录

### 检测和过滤
- 优化最小框过滤逻辑，添加对条漫（极端长宽比图片）的特殊处理
- 改进面积过滤算法，使用切割块面积作为参考，提高过滤准确性
- 优化日志输出，debug模式下显示被过滤框的详细信息（大小、面积、占比）

---

## 升级说明

请参考项目文档中的安装和升级指南。
